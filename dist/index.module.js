import{AppContainer as t}from"react-hot-loader";import e from"react";import o from"react-dom";import n from"lodash";import{join as r,relative as i}from"path";import{readdirSync as a,statSync as c}from"fs";import{merge as u}from"webpack-merge";import s from"webpack";var p={},f=function(){function r(){}return r.init=function(t,e){window.ReactRailsUJS.mountComponents=r.mountComponents,t.hot&&t.hot.accept(r.hmrModules(),function(t){r.fixDeps(t).forEach(function(t){return e(t)}),window.ReactRailsUJS.mountComponents()})},r.fixDeps=function(t){return n(t).flatten().uniq().value()},r.hmrModules=function(){return HMR_MODULES.map(function(t){return require.context("../").resolve(t)})},r.mountComponents=function(n){for(var r=window.ReactRailsUJS,i=r.findDOMNodes(n),a=0;a<i.length;++a){var c=i[a],u=c.getAttribute(r.CLASS_NAME_ATTR),s=r.getConstructor(u),f=c.getAttribute(r.PROPS_ATTR),l=f&&JSON.parse(f),m=c.getAttribute(r.RENDER_ATTR),d=c.getAttribute(r.CACHE_ID_ATTR),R=c.hasAttribute(r.TURBOLINKS_PERMANENT_ATTR);if(!s){var g="Cannot find component: '"+u+"'";throw console&&console.log&&console.log("%c[react-rails] %c"+g+" for element","font-weight: bold","",c),new Error(g+". Make sure your component is available to render.")}var w=p[d];void 0===w&&(w=e.createElement(s,l),R&&(p[d]=w)),m&&"function"==typeof o.hydrate?o.hydrate(h(t,null,w),c):o.render(h(t,null,w),c)}},r}(),l=function(){function t(t){this.webpackConfig=t}var e=t.prototype;return e.walkSync=function(t,e){var o=this;return void 0===e&&(e=[]),a(t).forEach(function(n){var a=r(t,n);a.includes(".DS_Store")||a.includes("packs")||(c(a).isDirectory()?e=o.walkSync(a,e):e.push("./"+i("app/javascript",a)))}),e},e.packFiles=function(){return this.walkSync("app/javascript")},e.entries=function(){var t=this;return Object.keys(this.webpackConfig.entry).reduce(function(e,o){return e[o]=["react-hot-loader/patch",t.webpackConfig.entry[o]],e},{})},e.reactRailsHotReloadConfig=function(){return{devtool:"cheap-eval-source-map",entry:this.entries(),output:{publicPath:"http://localhost:3035/packs/"},plugins:[new s.DefinePlugin({HMR_MODULES:JSON.stringify(this.packFiles())})],resolve:{alias:{"react-dom":"@hot-loader/react-dom"}},watch:!1}},e.merge=function(t){return this.webpackConfig=t,u(this.webpackConfig,this.reactRailsHotReloadConfig())},t}();module.exports=l;export{f as ReactRailsHotReload,l as ReactRailsHotReloadConfig};
//# sourceMappingURL=index.module.js.map
